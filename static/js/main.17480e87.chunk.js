(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(23),s=n.n(o),c=(n(59),n(1)),i=n(2),u=n(4),m=n(3),l=n(5),d=(n(62),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={username:""},n.onChange=function(e){n.setState({username:e.target.value})},n.onSubmit=function(e){var t=n.state.username;e.preventDefault(),t.trim().length>0&&(n.props.onSubmit(n.state.username),n.setState({username:""}))},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"user-login"},a.a.createElement("form",{onSubmit:this.onSubmit,className:"login-form"},a.a.createElement("h1",{className:"header"},"Login"),a.a.createElement("input",{type:"text",placeholder:"What is your name??",onChange:this.onChange,className:"input"}),a.a.createElement("input",{type:"submit",className:"input button"})))}}]),t}(r.Component)),h=n(16),g=n(15),p=n.n(g),b=(n(64),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={text:""},n.onInputChange=function(e){n.setState({text:e.target.value})},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.text),n.props.toggleDialog()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.theme,t={dialogStyles:{background:e.secondaryBackground,color:e.fontPrimary},inputStyles:{background:e.tertiaryBackground,color:e.fontPrimary},buttonStyles:{background:e.primaryBackground,color:e.fontPrimary}};return a.a.createElement("div",{className:"main"},a.a.createElement("form",{onSubmit:this.onSubmit,className:"dialog-form",style:t.dialogStyles},a.a.createElement("button",{onClick:this.props.toggleDialog,className:"cancel"},"x"),a.a.createElement("h1",{className:"header"},"Add new ".concat(this.props.name)),a.a.createElement("input",{type:"text",placeholder:"Type here..",onChange:this.onInputChange,className:"input",style:t.inputStyles}),a.a.createElement("input",{type:"submit",className:"input button",style:t.buttonStyles,value:"Add"})))}}]),t}(r.Component)),f=(n(66),function(e){var t=e.toggleSettings,n=e.theme,r={background:n.primaryBackground,color:n.fontPrimary};return a.a.createElement("div",{className:"app-header",style:r},a.a.createElement("div",{className:"app-name"},"#react-CHAT"),a.a.createElement("button",{className:"settings-header",style:{color:n.fontPrimary},onClick:t},"settings"))}),y=n(12),v=n(53),S=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isCurrentRoom,n=e.selectionColor,r={roomStyles:{":hover":{background:e.hoverColor}},currentRoomStyles:{background:n}},o=t?Object(y.a)({},r.roomStyles,r.currentRoomStyles):r.roomStyles;return a.a.createElement("li",{className:"list-item",style:o,onClick:this.props.setCurrentRoom},this.props.roomName)}}]),t}(r.PureComponent),k=Object(v.a)(S),O=n(52),C=n.n(O),E=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).renderThumb=function(e){var t=e.style,r={backgroundColor:n.props.thumbColor,borderRadius:"5px",marginRight:"5px"};return a.a.createElement("div",{style:Object(y.a)({},t,r)})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement(C.a,{renderThumbVertical:this.renderThumb,autoHide:this.props.autoHide,autoHideTimeout:1e3,autoHideDuration:400},this.props.children)}}]),t}(r.Component),j=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).renderRooms=function(){var e=n.props,t=e.rooms,r=e.theme;if(t)return n.props.rooms.map(function(e){return a.a.createElement(k,{key:e.id,roomName:e.name,isCurrentRoom:n.props.currentRoom.id===e.id,setCurrentRoom:function(){return n.props.setCurrentRoom(e.id)},selectionColor:r.secondaryBackground,hoverColor:r.tertiaryBackground})})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.theme,n={listStyles:{background:t.primaryBackground,color:t.fontPrimary},buttonStyles:{background:t.secondaryBackground,color:t.fontPrimary}};return a.a.createElement("div",{className:"column",style:n.listStyles},a.a.createElement("div",{className:"list-header"},"Your Rooms"),a.a.createElement("ul",{className:"list"},a.a.createElement(E,{thumbColor:t.secondaryBackground,autoHide:!0},this.renderRooms())),a.a.createElement("button",{className:"add-btn",style:n.buttonStyles,onClick:function(){return e.props.toggleDialog("room")}},"create Room"))}}]),t}(r.Component),N=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.memberOnlineColor,n=e.memberOfflineColor,r=e.memberName,o="online"===this.props.memberPresence.state?{background:t}:{background:n};return a.a.createElement("li",{className:"list-item"},a.a.createElement("span",{className:"presence",style:o}),r)}}]),t}(r.PureComponent),R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).renderMembers=function(){var e=n.props,t=e.members,r=e.theme;if(t)return n.props.members.map(function(e){return a.a.createElement(N,{key:e.id,memberName:e.name,memberPresence:e.presence,memberOfflineColor:r.memberOffline,memberOnlineColor:r.memberOnline})})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.theme,n={listStyles:{background:t.primaryBackground,color:t.fontPrimary},buttonStyles:{background:t.secondaryBackground,color:t.fontPrimary}};return a.a.createElement("div",{className:"column",style:n.listStyles},a.a.createElement("div",{className:"list-header"},"Members list"),a.a.createElement("ul",{className:"list"},a.a.createElement(E,{thumbColor:t.secondaryBackground,autoHide:!0},this.renderMembers())),a.a.createElement("button",{className:"add-btn",style:n.buttonStyles,onClick:function(){return e.props.toggleDialog("member to room")}},"Add"))}}]),t}(r.Component),T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.messageSender,n=e.messageText;return a.a.createElement("li",{className:"message"},a.a.createElement("span",{className:"message-sender",style:{color:this.props.senderStyle}},t),a.a.createElement("p",{className:"message-text",style:{color:this.props.messageStyle}},n))}}]),t}(r.PureComponent),A=(n(92),function(e){var t=e.messages,n=e.theme,r=t.map(function(e){return a.a.createElement(T,{key:e.id,messageSender:e.senderId,messageText:e.text,senderStyle:n.fontSecondary,messageStyle:n.fontPrimary})});return a.a.createElement("ul",{className:"message-list"},a.a.createElement(E,{thumbColor:n.primaryBackground},r))}),B=function(e){var t=e.usersWhoAreTyping,n=t.length>0?t.length>1?"".concat(t[0]," and ").concat(t[1],",... are typing"):"".concat(t[0]," is typing"):null;return a.a.createElement("p",{className:"typing-indicator"},n)},U=(n(94),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={text:""},n.onChange=function(e){n.setState({text:e.target.value}),n.props.onChange&&n.props.onChange()},n.onSubmit=function(e){e.preventDefault(),n.props.onSubmit(n.state.text),n.setState({text:""})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.theme,t={inputStyles:{background:e.tertiaryBackground,color:e.fontPrimary},buttonStyles:{background:e.primaryBackground,color:e.fontPrimary}};return a.a.createElement("form",{onSubmit:this.onSubmit,className:"message-form"},a.a.createElement("input",{type:"text",placeholder:"Enter message to send..",onChange:this.onChange,value:this.state.text,className:"message-input",style:t.inputStyles}),a.a.createElement("input",{type:"submit",className:"message-send button",style:t.buttonStyles,value:"send.."}))}}]),t}(r.Component)),w=(n(96),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).onClick=function(e){n.props.setTheme(e),n.props.toggleSettings()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"settings"},a.a.createElement("div",{className:"cancel",onClick:this.props.toggleSettings},"x"),a.a.createElement("h2",{className:"header"},"Select a theme"),a.a.createElement("div",{className:"themes"},a.a.createElement("div",{className:"theme-box dark",onClick:function(){return e.onClick("dark")}}),a.a.createElement("div",{className:"theme-box blue",onClick:function(){return e.onClick("blue")}}),a.a.createElement("div",{className:"theme-box red",onClick:function(){return e.onClick("red")}})))}}]),t}(r.Component)),x={primaryBackground:"#181b1f",secondaryBackground:"#2c2f33",tertiaryBackground:"#21252b",fontPrimary:"#fff",fontSecondary:"#adadad",memberOnline:"#2e2",memberOffline:"#2e2e2e"},P={primaryBackground:"#80b7f5",secondaryBackground:"#e6e6e6",tertiaryBackground:"#dbdbdb",fontPrimary:"#000",fontSecondary:"#30373f",memberOnline:"#227093",memberOffline:"#d2dae2"},D={primaryBackground:"#ff7979",secondaryBackground:"#e6e6e6",tertiaryBackground:"#dbdbdb",fontPrimary:"#000",fontSecondary:"#30373f",memberOnline:"#b33939",memberOffline:"#d2dae2"},M=(n(98),function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={currentUser:{},currentRoom:{},messages:[],usersWhoAreTyping:[],isDialogActive:!1,dialogName:"",isSettingActive:!1,currentTheme:"blue"},n.subscribeUserToRoom=function(e,t){return e.subscribeToRoom({roomId:t.id,messageLimit:100,hooks:{onMessage:function(e){n.setState({messages:Object(h.a)(n.state.messages).concat([e])})},onUserStartedTyping:function(e){n.setState({usersWhoAreTyping:Object(h.a)(n.state.usersWhoAreTyping).concat([e.name])})},onUserStoppedTyping:function(e){n.setState({usersWhoAreTyping:n.state.usersWhoAreTyping.filter(function(t){return t!==e.name})})},onPresenceChange:function(){return n.forceUpdate()},onUserJoined:function(){return n.forceUpdate()}}})},n.sendMessage=function(e){n.state.currentUser.sendMessage({text:e,roomId:n.state.currentRoom.id})},n.sendTypingEvent=function(){n.state.currentUser.isTypingIn({roomId:n.state.currentRoom.id}).catch(function(e){return console.error("error",e)})},n.addRoom=function(e){n.state.currentUser.createRoom({name:e}).then(function(e){n.subscribeUserToRoom(n.state.currentUser,e),n.fetchMessagesForCurrentRoom(e),n.setState({currentRoom:e})}).catch(function(e){return console.error(e)})},n.addMemberToRoom=function(e){var t=n.state,r=t.currentUser,a=t.currentRoom;r.addUserToRoom({userId:e,roomId:a.id}).catch(function(e){return console.error(e)})},n.setCurrentRoom=function(e){var t=n.state.currentUser.rooms.find(function(t){return t.id===e});n.setState({currentRoom:t,usersWhoAreTyping:[]}),n.fetchMessagesForCurrentRoom(t)},n.fetchMessagesForCurrentRoom=function(e){return n.state.currentUser.fetchMessages({roomId:e.id,limit:10}).then(function(e){return n.setState({messages:e})}).catch(function(e){return console.error(e)})},n.toggleDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState(function(t){return{isDialogActive:!t.isDialogActive,dialogName:e}})},n.toggleSettings=function(){n.setState(function(e){return{isSettingActive:!e.isSettingActive}})},n.setTheme=function(e){e!==n.state.currentTheme&&n.setState({currentTheme:e})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;new p.a.ChatManager({instanceLocator:"v1:us1:f386bd2b-8c98-4f74-b902-5fbd3cba1336",userId:this.props.currentUsername,tokenProvider:new p.a.TokenProvider({url:"".concat("https://chat-mee.herokuapp.com","/auth")})}).connect().then(function(t){return e.setState({currentUser:t}),t.rooms.map(function(n){return e.subscribeUserToRoom(t,n)})}).then(function(){var t=e.state.currentUser.rooms[0];e.setState({currentRoom:t})}).then(function(){return e.fetchMessagesForCurrentRoom(e.state.currentRoom)}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.state,t=e.messages,n=e.currentUser,r=e.currentRoom,o=e.isDialogActive,s=e.dialogName,c=e.usersWhoAreTyping,i=e.isSettingActive,u=e.currentTheme,m="dark"!==u?"blue"===u?P:D:x,l="room"===s?this.addRoom:this.addMemberToRoom,d=o?a.a.createElement(b,{name:s,toggleDialog:this.toggleDialog,onSubmit:l,theme:m}):null;return i?a.a.createElement(w,{setTheme:this.setTheme,toggleSettings:this.toggleSettings}):a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{toggleSettings:this.toggleSettings,theme:m}),a.a.createElement("div",{className:"chat-screen"},a.a.createElement(j,{rooms:n.rooms,toggleDialog:this.toggleDialog,currentRoom:r,setCurrentRoom:this.setCurrentRoom,theme:m}),a.a.createElement("div",{className:"chat",style:{background:m.secondaryBackground}},a.a.createElement(A,{messages:t,theme:m}),a.a.createElement("div",{className:"chat-form"},a.a.createElement(B,{usersWhoAreTyping:c}),a.a.createElement(U,{onSubmit:this.sendMessage,onChange:this.sendTypingEvent,theme:m}))),a.a.createElement(R,{members:r.users,toggleDialog:this.toggleDialog,theme:m})),d)}}]),t}(r.Component)),I=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={currentUsername:"",currentScreen:"LoginScreen"},n.onUsernameSubmit=function(e){fetch("".concat("https://chat-mee.herokuapp.com","/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(function(t){return n.setState({currentUsername:e,currentScreen:"ChatScreen"})}).catch(function(e){return console.error(e)})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"app"},"ChatScreen"===this.state.currentScreen?a.a.createElement(M,{currentUsername:this.state.currentUsername}):a.a.createElement(d,{onSubmit:this.onUsernameSubmit}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},54:function(e,t,n){e.exports=n(100)},59:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},92:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){}},[[54,2,1]]]);
//# sourceMappingURL=main.17480e87.chunk.js.map